@using RecursosHumanos.Models.ViewModels.Empleados
@model PersonalAlarmaDetalleVM
<style>
    .alertas-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,.55);
        z-index: 1050;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 1.5rem; /* aire en pantallas chicas */
    }

    .alertas-modal {
        background: #fff;
        width: 100%;
        max-width: 1100px;
        height: 90vh;
        border-radius: 12px;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        box-shadow: 0 20px 60px rgba(0,0,0,.25);
    }

        /* ================= HEADER ================= */
        .alertas-modal .modal-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        /* ================= BODY ================= */
        .alertas-modal .modal-body {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem 2rem; /* 🔥 aire interno elegante */
        }

            /* Limitar ancho visual del contenido */
            .alertas-modal .modal-body .container-fluid {
                max-width: 1000px;
                margin: 0 auto;
            }

        /* ================= FOOTER ================= */
        .alertas-modal .modal-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid #dee2e6;
            display: flex;
            justify-content: flex-end; /* botón elegante a la derecha */
            gap: .5rem;
        }

            /* Botón no pegado */
            .alertas-modal .modal-footer .btn {
                min-width: 120px;
            }

        /* Scrollbar más discreto (opcional) */
        .alertas-modal .modal-body::-webkit-scrollbar {
            width: 8px;
        }

        .alertas-modal .modal-body::-webkit-scrollbar-thumb {
            background-color: rgba(0,0,0,.2);
            border-radius: 4px;
        }

</style>

<div class="alertas-overlay alertas-overlay-details">
    <div class="alertas-modal">

        <!-- HEADER OVERLAY -->
        <div class="modal-header">
            <h5 class="mb-0">
                <i class="bi bi-eye"></i> Detalles del personal
            </h5>
            <button type="button"
                    class="btn-close"
                    onclick="AlertasOverlayDetails.close()"></button>
        </div>

        <!-- BODY OVERLAY -->
        <div class="modal-body">

            <!-- 🔽 AQUÍ EMPIEZA TU VIEW ORIGINAL (SIN CAMBIOS) 🔽 -->

            <div class="container-fluid">

                <!-- ===================== ENCABEZADO ===================== -->
                <div class="row align-items-center mb-4">
                    <div class="col-auto">
                        @if (Model.FotoPersonal != null)
                        {
                            var base64 = Convert.ToBase64String(Model.FotoPersonal);
                            <img src="data:image/jpeg;base64,@base64"
                                 class="rounded-circle shadow"
                                 style="width:80px;height:80px;object-fit:cover;" />
                        }
                        else
                        {
                            <i class="bi bi-person-circle fs-1 text-muted"></i>
                        }
                    </div>
                    <div class="col">
                        <h4 class="mb-0">@Model.Nombre</h4>
                        <small class="text-muted">@Model.NombreDepartamento</small>
                        <div>
                            <span class="badge @(Model.DiasDesdeUltimaLiquidacion > 30 ? "bg-danger" : "bg-warning text-dark")">
                                @Model.DiasDesdeUltimaLiquidacion días sin liquidar
                            </span>
                        </div>
                    </div>
                </div>

                <!-- ===================== MÉTRICAS ===================== -->
                <div class="row text-center mb-4">
                    <div class="col-md-3 mb-3">
                        <div class="card shadow-sm">
                            <div class="card-body">
                                <i class="bi bi-receipt fs-3 text-primary"></i>
                                <h6 class="mt-2">Liquidaciones</h6>
                                <h4>@Model.TotalLiquidaciones</h4>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-3 mb-3">
                        <div class="card shadow-sm">
                            <div class="card-body">
                                <i class="bi bi-truck fs-3 text-success"></i>
                                <h6 class="mt-2">Viajes</h6>
                                <h4>@Model.TotalViajes</h4>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-3 mb-3">
                        <div class="card shadow-sm">
                            <div class="card-body">
                                <i class="bi bi-cash-coin fs-3 text-warning"></i>
                                <h6 class="mt-2">Total Pagado</h6>
                                <h4>$@Model.TotalPagado.ToString("N2")</h4>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-3 mb-3">
                        <div class="card shadow-sm">
                            <div class="card-body">
                                <i class="bi bi-calendar-check fs-3 text-info"></i>
                                <h6 class="mt-2">Último Pago</h6>
                                <h6>
                                    @(Model.UltimaFechaPago.HasValue
                                                                        ? Model.UltimaFechaPago.Value.ToString("dd/MM/yyyy")
                                                                        : "—")
                                </h6>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ===================== INFORMACIÓN LABORAL ===================== -->
                <div class="card mb-4 shadow-sm">
                    <div class="card-header fw-bold">
                        <i class="bi bi-briefcase"></i> Información Laboral
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <strong>Fecha ingreso:</strong><br />
                                @Model.FechaIngreso.ToString("dd/MM/yyyy")
                            </div>
                            <div class="col-md-4">
                                <strong>Antigüedad:</strong><br />
                                @Model.AntiguedadAnios años
                            </div>
                            <div class="col-md-4">
                                <strong>Estado:</strong><br />
                                <span class="badge bg-success">@Model.Estado</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ===================== CONTACTO ===================== -->
                <div class="card shadow-sm">
                    <div class="card-header fw-bold">
                        <i class="bi bi-telephone"></i> Información de Contacto
                    </div>
                    <div class="card-body">
                        <div class="row mb-2">
                            <div class="col-md-6">
                                <i class="bi bi-phone"></i>
                                <strong>Teléfono:</strong> @Model.TelefonoPersonal
                            </div>
                            <div class="col-md-6">
                                <i class="bi bi-envelope"></i>
                                <strong>Email:</strong>
                                <a href="mailto:@Model.Email">@Model.Email</a>
                            </div>
                        </div>
                        <div class="row mb-2">
                            <div class="col-md-6">
                                <i class="bi bi-telephone-forward"></i>
                                <strong>Emergencia:</strong> @Model.TelefonoEmergencia
                            </div>
                            <div class="col-md-6">
                                <i class="bi bi-geo-alt"></i>
                                <strong>Dirección:</strong> @Model.Direccion
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- 🔼 FIN DE TU VIEW ORIGINAL 🔼 -->

        </div>

        <!-- FOOTER -->
        <div class="modal-footer">
            <button class="btn btn-secondary"
                    onclick="AlertasOverlayDetails.close()">
                Cerrar
            </button>
        </div>

    </div>
</div>
